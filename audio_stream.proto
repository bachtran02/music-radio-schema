syntax = "proto3";

package radio;

option go_package = "github.com/bachtran02/webrtc-server/proto/webrtc-proto";
option java_package = "lavaradio.proto";
option java_multiple_files = true;

service WebRTCManager {
  rpc StartSession (StartSessionRequest) returns (StartSessionResponse) {}
  rpc StopSession (EndSessionRequest) returns (EndSessionResponse) {}
}

service AudioProvider {
  rpc PullAudioStream (StreamRequest) returns (stream AudioFrame) {}
}

message StartSessionRequest {
  string stream_id = 1;
}

message StartSessionResponse {
  bool accepted = 1;
}

message EndSessionRequest{
  string stream_id = 1;
}

message EndSessionResponse {
  bool accepted = 1;
}

message StreamRequest {
  string stream_id = 1;
}

message AudioFrame {
  bytes opus_data = 1;
  bool is_silence = 2;
}